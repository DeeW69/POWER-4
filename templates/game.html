<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Puissance 4</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>Puissance 4</h1>

    {{if .GameOver}}
      {{if eq .Winner 1}}<p>Joueur 1 (rouge) a gagné !</p>
      {{else if eq .Winner 2}}<p>Joueur 2 (bleu) a gagné !</p>
      {{else}}<p>Match nul !</p>{{end}}
      <form method="post" action="/reset"><button type="submit">Rejouer</button></form>
    {{else}}
      <p>Tour actuel : {{if eq .Current 1}}Joueur 1 (rouge){{else}}Joueur 2 (bleu){{end}}</p>
    {{end}}

    <table>
      <thead>
        <tr>
          {{range $c := (seq .Board.Cols)}}
            <th>
              {{if not $.GameOver}}
                <form method="post" action="/play">
                  <input type="hidden" name="col" value="{{$c}}">
                  <button type="submit">▼</button>
                </form>
              {{end}}
            </th>
          {{end}}
        </tr>
      </thead>
      <tbody>
        {{range $r, $row := .Board.Grid}}
          <tr>
            {{range $c, $cell := $row}}
              <td>
                {{if eq $cell 1}}<div class="disc p1"></div>
                {{else if eq $cell 2}}<div class="disc p2"></div>
                {{else}}<div class="disc empty"></div>{{end}}
              </td>
            {{end}}
          </tr>
        {{end}}
      </tbody>
    </table>
  </div>
</body>
</html>
